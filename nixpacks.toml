[phases.setup]
nixPkgs = ["python311", "python311Packages.pip", "python311Packages.virtualenv", "nodejs_18", "nodePackages.npm"]

[phases.install]
cmds = [
  "python -m venv /opt/venv",
  "source /opt/venv/bin/activate && pip install --upgrade pip",
  "source /opt/venv/bin/activate && pip install -r requirements.txt",
  "source /opt/venv/bin/activate && python -m spacy download en_core_web_sm",
  "cd Frontend && npm install",
  "cd Frontend && npm run build"
]

[start]
cmd = "source /opt/venv/bin/activate && python start_simple.py"

